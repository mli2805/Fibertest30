# General guidelines

## Make all configurable things explicit in appsettings.json

All things which are configurable should require full configuration in appsettings.json.
Don't use default/fallback values, but throw instead, if some settings are missing or invalid.
Rationale: It makes it easier to find where some setting is taken from and how it can be changed.


## Prefer fail-fast over fail-safe, i.e. prefer offensive over over-deffensive programming

Don't complicate the code with excessive checks and fallback values, but just throw exception instead.
Exceptions: Dealing with external data (user input, I/O, etc). In critical parts which must not crash
(by using try/catch blocks and logging exceptions with stack traces).
Rationale: It makes the code cleaner and it makes it easier to find bugs by analysing stack traces.


# Other

## Use file scoped namespace declarations

This is set in .editorconfig: csharp_style_namespace_declarations
Visual Studio respects this when creating new items.


## Use the default project namespace as the default namespace for newly created items (classes, interfaces, etc.)

By default Visual Studio 2022 adds new items using a template with $rootnamespace$,
which means subfolders will be included in the namespace.
More about template parameters: https://learn.microsoft.com/en-us/visualstudio/ide/template-parameters?view=vs-2022

We would like to avoid synchronizing namespaces with file system folders to be able to move files around freely
without generating much noise. 
This is not a rule, you can create any namespaces that make sense, just make sure it's intentional.
Some article: https://medium.com/@steve_verm/matching-namespaces-to-folders-is-an-anti-pattern-e8edb3a6b8e5

Visual Studio 2022 currently doesn't have any support for setting up this autogenerated namespaces 
(except using a custom template for every item).
But I hope it will be implemented in future. 
Here are some git issues about it:
https://github.com/dotnet/roslyn/issues/45494
https://github.com/dotnet/roslyn/issues/58678

Resharper does have some support for this, but let's not rely on it in general case.
So, if you use resharper, you should figure out by your own how to deal with namespaces.

As regards to Visual Studio, you could try to create and use a custom template.
Or just edit newly generated items manually.

Hint:
If you create a new item on a file that is currently exist and is located on the same folder, 
you can use move refactoring which will respect the current namespace and also won't generate garbage using statements.

If you drag a file from one folder to another, Visual Studio 2022 by default changes the namespace.
To avoid this uncheck Tools -> Options -> Project and Soluction -> General -> Enable namespace update when moving files


## Use IDateTime interface to get current date time

This abstracts from the real clock which helps to test and also ensures nobody accidentally uses DateTime.Now


## Use int and double

Don't use float over double or Int16 over int just because 'it should be enough'.
Also don't use unsigned int over int to emphasize the fact that negative values are not valid for some variable.
Exceptions: Data transfer, network or some other low level layer. Bit operations. Or for performance if definitely prooved by profiling.
Rationale: Using unconventional types requires literal postfixes and casting and may also lead to bugs in conversion.


## null! or records - TBD


